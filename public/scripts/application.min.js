function MarkerClusterer(e,t,a){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var r=a||{};this.gridSize_=r.gridSize||60,this.minClusterSize_=r.minimumClusterSize||2,this.maxZoom_=r.maxZoom||null,this.styles_=r.styles||[],this.imagePath_=r.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=r.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=r.zoomOnClick&&(this.zoomOnClick_=r.zoomOnClick),this.averageCenter_=!1,void 0!=r.averageCenter&&(this.averageCenter_=r.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var n=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=n.map_.getZoom();n.prevZoom_!=e&&(n.prevZoom_=e,n.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){n.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,a){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=a||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),a=new google.maps.LatLngBounds,r=0;e=t[r];r++)a.extend(e.getPosition());this.map_.fitBounds(a)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var a=0,r=e.length,n=r;0!==n;)n=parseInt(n/10,10),a++;return a=Math.min(a,t),{text:r,index:a}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var a,r=0;a=e[r];r++)this.pushMarkerTo_(a);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var a,r=0;a=this.markers_[r];r++)if(a==e){t=r;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var a=this.removeMarker_(e);return!(t||!a)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var a,r=!1,n=0;a=e[n];n++){var o=this.removeMarker_(a);r=r||o}if(!t&&r)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),a=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),r=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),n=t.fromLatLngToDivPixel(a);n.x+=this.gridSize_,n.y-=this.gridSize_;var o=t.fromLatLngToDivPixel(r);o.x-=this.gridSize_,o.y+=this.gridSize_;var s=t.fromDivPixelToLatLng(n),i=t.fromDivPixelToLatLng(o);return e.extend(s),e.extend(i),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,a=0;t=this.clusters_[a];a++)t.remove();for(var r,a=0;r=this.markers_[a];a++)r.isAdded=!1,e&&r.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,a=0;t=e[a];a++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var a=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,n=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,a=4e4,r=null,n=(e.getPosition(),0);t=this.clusters_[n];n++){var o=t.getCenter();if(o){var s=this.distanceBetweenPoints_(o,e.getPosition());s<a&&(a=s,r=t)}}if(r&&r.isMarkerInClusterBounds(e))r.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),a=this.getExtendedBounds(t),r=0;e=this.markers_[r];r++)!e.isAdded&&this.isMarkerInBounds_(e,a)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,a=0;t=this.markers_[a];a++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,a=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,r=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(a,r),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var n=this.markers_.length;if(n<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),n==this.minClusterSize_)for(var o=0;o<n;o++)this.markers_[o].setMap(null);return n>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),a=this.getMarkers(),r=0;e=a[r];r++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var a,r=0;a=this.markers_[r];r++)a.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var n=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this,a=!1;google.maps.event.addDomListener(this.div_,"click",function(e){a||t.triggerClusterClick(e)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){a=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){a=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var a=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+a+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",n=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+r+"; position:absolute; font-size:"+n+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(e,t){"object"==typeof exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(angular){return angular.module("ngMap",[]),function(){"use strict";var e,t=function(t,a,r,n,o,s,i,l,u){e=s;var p=this,m=o.startSymbol(),c=o.endSymbol();p.mapOptions,p.mapEvents,p.eventListeners,p.addObject=function(e,t){if(p.map){p.map[e]=p.map[e]||{};var a=Object.keys(p.map[e]).length;p.map[e][t.id||a]=t,p.map instanceof google.maps.Map&&("infoWindows"!=e&&t.setMap&&t.setMap&&t.setMap(p.map),t.centered&&t.position&&p.map.setCenter(t.position),"markers"==e&&p.objectChanged("markers"),"customMarkers"==e&&p.objectChanged("customMarkers"))}},p.deleteObject=function(e,t){if(t.map){var a=t.map[e];for(var r in a)a[r]===t&&(google.maps.event.clearInstanceListeners(t),delete a[r]);t.map&&t.setMap&&t.setMap(null),"markers"==e&&p.objectChanged("markers"),"customMarkers"==e&&p.objectChanged("customMarkers")}},p.observeAttrSetObj=function(t,a,r){if(a.noWatcher)return!1;for(var n=e.getAttrsToObserve(t),o=0;o<n.length;o++){var s=n[o];a.$observe(s,i.observeAndSet(s,r))}},p.zoomToIncludeMarkers=function(){if(null!=p.map.markers&&Object.keys(p.map.markers).length>0||null!=p.map.customMarkers&&Object.keys(p.map.customMarkers).length>0){var e=new google.maps.LatLngBounds;for(var t in p.map.markers)e.extend(p.map.markers[t].getPosition());for(var a in p.map.customMarkers)e.extend(p.map.customMarkers[a].getPosition());p.mapOptions.maximumZoom&&(p.enableMaximumZoomCheck=!0),p.map.fitBounds(e)}},p.objectChanged=function(e){!p.map||"markers"!=e&&"customMarkers"!=e||"auto"!=p.map.zoomToIncludeMarkers||p.zoomToIncludeMarkers()},p.initializeMap=function(){var o=p.mapOptions,s=p.mapEvents,g=p.map;if(p.map=l.getMapInstance(a[0]),i.setStyle(a[0]),g){var h=e.filter(r),f=e.getOptions(h),y=e.getControlOptions(h);o=angular.extend(f,y);for(var v in g){var k=g[v];if("object"==typeof k)for(var M in k)p.addObject(v,k[M])}p.map.showInfoWindow=p.showInfoWindow,p.map.hideInfoWindow=p.hideInfoWindow}o.zoom=o.zoom&&!isNaN(o.zoom)?+o.zoom:15;var w=o.center,b=new RegExp(u(m)+".*"+u(c));if(!o.center||"string"==typeof w&&w.match(b))o.center=new google.maps.LatLng(0,0);else if("string"==typeof w&&w.match(/^[0-9.-]*,[0-9.-]*$/)){var C=parseFloat(w.split(",")[0]),_=parseFloat(w.split(",")[1]);o.center=new google.maps.LatLng(C,_)}else if(!(w instanceof google.maps.LatLng)){var z=o.center;delete o.center,i.getGeoLocation(z,o.geoLocationOptions).then(function(e){p.map.setCenter(e);var a=o.geoCallback;a&&n(a)(t)},function(){o.geoFallbackCenter&&p.map.setCenter(o.geoFallbackCenter)})}p.map.setOptions(o);for(var I in s){var x=s[I],O=google.maps.event.addListener(p.map,I,x);p.eventListeners[I]=O}p.observeAttrSetObj(d,r,p.map),p.singleInfoWindow=o.singleInfoWindow,google.maps.event.trigger(p.map,"resize"),google.maps.event.addListenerOnce(p.map,"idle",function(){i.addMap(p),o.zoomToIncludeMarkers&&p.zoomToIncludeMarkers(),t.map=p.map,t.$emit("mapInitialized",p.map),r.mapInitialized&&n(r.mapInitialized)(t,{map:p.map})}),o.zoomToIncludeMarkers&&o.maximumZoom&&google.maps.event.addListener(p.map,"zoom_changed",function(){1==p.enableMaximumZoomCheck&&(p.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(p.map,"bounds_changed",function(){p.map.setZoom(Math.min(o.maximumZoom,p.map.getZoom()))}))})},t.google=google;var d=e.orgAttributes(a),g=e.filter(r),h=e.getOptions(g,{scope:t}),f=e.getControlOptions(g),y=angular.extend(h,f),v=e.getEvents(t,g);if(Object.keys(v).length,p.mapOptions=y,p.mapEvents=v,p.eventListeners={},h.lazyInit){if(r.id&&0===r.id.indexOf(m,0)&&-1!==r.id.indexOf(c,r.id.length-c.length))var k=r.id.slice(2,-2),M=n(k)(t);else var M=r.id;p.map={id:M},i.addMap(p)}else p.initializeMap();h.triggerResize&&google.maps.event.trigger(p.map,"resize"),a.bind("$destroy",function(){l.returnMapInstance(p.map),i.deleteMap(p)})};t.$inject=["$scope","$element","$attrs","$parse","$interpolate","Attr2MapOptions","NgMap","NgMapPool","escapeRegexpFilter"],angular.module("ngMap").controller("__MapController",t)}(),function(){"use strict";var e,t=function(t,r,n,o){o=o[0]||o[1];var s=e.orgAttributes(r),i=e.filter(n),l=e.getOptions(i,{scope:t}),u=e.getEvents(t,i),p=a(l,u);o.addObject("bicyclingLayers",p),o.observeAttrSetObj(s,n,p),r.bind("$destroy",function(){o.deleteObject("bicyclingLayers",p)})},a=function(e,t){var a=new google.maps.BicyclingLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a},r=function(a){return e=a,{restrict:"E",require:["?^map","?^ngMap"],link:t}};r.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",r)}(),function(){"use strict";var e,t,a=function(t,a,r,n,o){n=n[0]||n[1];var s=e.filter(r),i=e.getOptions(s,{scope:t}),l=e.getEvents(t,s),u=a[0].parentElement.removeChild(a[0]),p=o();angular.element(u).append(p);for(var m in l)google.maps.event.addDomListener(u,m,l[m]);n.addObject("customControls",u);var c=i.position;n.map.controls[google.maps.ControlPosition[c]].push(u),a.bind("$destroy",function(){n.deleteObject("customControls",u)})},r=function(r,n){return e=r,t=n,{restrict:"E",require:["?^map","?^ngMap"],link:a,transclude:!0}};r.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customControl",r)}(),function(){"use strict";var e,t,a,r,n=function(e){e=e||{},this.el=document.createElement("div"),this.el.style.display="inline-block",this.el.style.visibility="hidden",this.visible=!0;for(var t in e)this[t]=e[t]},o=function(){n.prototype=new google.maps.OverlayView,n.prototype.setContent=function(e,t){this.el.innerHTML=e,this.el.style.position="absolute",t&&a(angular.element(this.el).contents())(t)},n.prototype.getDraggable=function(){return this.draggable},n.prototype.setDraggable=function(e){this.draggable=e},n.prototype.getPosition=function(){return this.position},n.prototype.setPosition=function(e){e&&(this.position=e);var a=this;if(this.getProjection()&&"function"==typeof this.position.lng){var r=function(){if(a.getProjection()){var e=a.getProjection().fromLatLngToDivPixel(a.position),t=Math.round(e.x-a.el.offsetWidth/2),r=Math.round(e.y-a.el.offsetHeight-10);a.el.style.left=t+"px",a.el.style.top=r+"px",a.el.style.visibility="visible"}};a.el.offsetWidth&&a.el.offsetHeight?r():t(r,300)}},n.prototype.setZIndex=function(e){e&&(this.zIndex=e),this.el.style.zIndex=this.zIndex},n.prototype.getVisible=function(){return this.visible},n.prototype.setVisible=function(e){this.el.style.display=e?"inline-block":"none",this.visible=e},n.prototype.addClass=function(e){var t=this.el.className.trim().split(" ");-1==t.indexOf(e)&&t.push(e),this.el.className=t.join(" ")},n.prototype.removeClass=function(e){var t=this.el.className.split(" "),a=t.indexOf(e);a>-1&&t.splice(a,1),this.el.className=t.join(" ")},n.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},n.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},n.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},s=function(a,o){return function(s,i,l,u){u=u[0]||u[1];var p=e.orgAttributes(i),m=e.filter(l),c=e.getOptions(m,{scope:s}),d=e.getEvents(s,m);i[0].style.display="none";var g=new n(c);t(function(){s.$watch("["+o.join(",")+"]",function(){g.setContent(a,s)},!0),g.setContent(i[0].innerHTML,s);var e=i[0].firstElementChild.className;g.addClass("custom-marker"),g.addClass(e),c.position instanceof google.maps.LatLng||r.getGeoLocation(c.position).then(function(e){g.setPosition(e)})});for(var h in d)google.maps.event.addDomListener(g.el,h,d[h]);u.addObject("customMarkers",g),u.observeAttrSetObj(p,l,g),i.bind("$destroy",function(){u.deleteObject("customMarkers",g)})}},i=function(n,i,l,u,p,m){e=u,t=n,a=i,r=p;var c=l.startSymbol(),d=l.endSymbol(),g=new RegExp(m(c)+"([^"+d.substring(0,1)+"]+)"+m(d),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(e){o(),e[0].style.display="none";var t=e.html(),a=t.match(g),r=[];return(a||[]).forEach(function(e){var t=e.replace(c,"").replace(d,"");-1==e.indexOf("::")&&-1==e.indexOf("this.")&&-1==r.indexOf(t)&&r.push(e.replace(c,"").replace(d,""))}),s(t,r)}}};i.$inject=["$timeout","$compile","$interpolate","Attr2MapOptions","NgMap","escapeRegexpFilter"],angular.module("ngMap").directive("customMarker",i)}(),function(){"use strict";var e,t,a,r=function(e,t){e.panel&&(e.panel=document.getElementById(e.panel)||document.querySelector(e.panel));var a=new google.maps.DirectionsRenderer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a},n=function(e,r){var n=new google.maps.DirectionsService,o=r;o.travelMode=o.travelMode||"DRIVING";var s=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var i in o)-1===s.indexOf(i)&&delete o[i];o.waypoints&&("[]"==o.waypoints||""===o.waypoints)&&delete o.waypoints;var l=function(a){n.route(a,function(a,r){r==google.maps.DirectionsStatus.OK&&t(function(){e.setDirections(a)})})};o.origin&&o.destination&&("current-location"==o.origin?a.getCurrentPosition().then(function(e){o.origin=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),l(o)}):"current-location"==o.destination?a.getCurrentPosition().then(function(e){o.destination=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),l(o)}):l(o))},o=function(o,s,i,l){var u=o;return e=l,t=s,a=i,{restrict:"E",require:["?^map","?^ngMap"],link:function(a,o,s,i){i=i[0]||i[1];var l=u.orgAttributes(o),p=u.filter(s),m=u.getOptions(p,{scope:a}),c=u.getEvents(a,p),d=u.getAttrsToObserve(l),g=r(m,c);i.addObject("directionsRenderers",g),d.forEach(function(e){!function(e){s.$observe(e,function(a){if("panel"==e)t(function(){var e=document.getElementById(a)||document.querySelector(a);e&&g.setPanel(e)});else if(m[e]!==a){var r=u.toOptionValue(a,{key:e});m[e]=r,n(g,m)}})}(e)}),e.getMap().then(function(){n(g,m)}),o.bind("$destroy",function(){i.deleteObject("directionsRenderers",g)})}}};o.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",o)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(e){var t=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,a,r,n){n=n[0]||n[1];var o=t.filter(r),s=t.getOptions(o,{scope:e}),i=t.getControlOptions(o),l=t.getEvents(e,o),u=new google.maps.drawing.DrawingManager({drawingMode:s.drawingmode,drawingControl:s.drawingcontrol,drawingControlOptions:i.drawingControlOptions,circleOptions:s.circleoptions,markerOptions:s.markeroptions,polygonOptions:s.polygonoptions,polylineOptions:s.polylineoptions,rectangleOptions:s.rectangleoptions});r.$observe("drawingControlOptions",function(e){u.drawingControlOptions=t.getControlOptions({drawingControlOptions:e}).drawingControlOptions,u.setDrawingMode(null),u.setMap(n.map)});for(var p in l)google.maps.event.addListener(u,p,l[p]);n.addObject("mapDrawingManager",u),a.bind("$destroy",function(){n.deleteObject("mapDrawingManager",u)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.filter(n),i=t.getOptions(s,{scope:e}),l=t.getEvents(e,s,l),u=a(i,l);o.addObject("mapsEngineLayers",u)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.FusionTablesLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.filter(n),i=t.getOptions(s,{scope:e}),l=t.getEvents(e,s,l),u=a(i,l);o.addObject("fusionTablesLayers",u),r.bind("$destroy",function(){o.deleteObject("fusionTablesLayers",u)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(e,t){var a=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=a.filter(n),i=a.getOptions(s,{scope:e});if(i.data=t[n.data]||e[n.data],!(i.data instanceof Array))throw"invalid heatmap data";i.data=new google.maps.MVCArray(i.data);var l=new google.maps.visualization.HeatmapLayer(i);a.getEvents(e,s),o.addObject("heatmapLayers",l)}}}])}(),function(){"use strict";var e=function(e,t,a,r,n,o,s){var i=e,l=function(e,o,s){var i;!e.position||e.position instanceof google.maps.LatLng||delete e.position,i=new google.maps.InfoWindow(e);for(var l in o)l&&google.maps.event.addListener(i,l,o[l]);var u=a(function(e){angular.isString(s)?r(s).then(function(t){e(angular.element(t).wrap("<div>").parent())},function(e){throw"info-window template request failed: "+e}):e(s)}).then(function(e){var t=e.html().trim();if(1!=angular.element(t).length)throw"info-window working as a template must have a container";i.__template=t.replace(/\s?ng-non-bindable[='"]+/,"")});return i.__open=function(e,a,r){u.then(function(){n(function(){r&&(a.anchor=r);var n=t(i.__template)(a);i.setContent(n[0]),a.$apply(),r&&r.getPosition?i.open(e,r):r&&r instanceof google.maps.LatLng?(i.open(e),i.setPosition(r)):i.open(e),i.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})},i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,a,r){r=r[0]||r[1],t.css("display","none");var n,u=i.orgAttributes(t),p=i.filter(a),m=i.getOptions(p,{scope:e}),c=i.getEvents(e,p),d=l(m,c,m.template||t);!m.position||m.position instanceof google.maps.LatLng||(n=m.position),n&&s.getGeoLocation(n).then(function(t){d.setPosition(t),d.__open(r.map,e,t);var n=a.geoCallback;n&&o(n)(e)}),r.addObject("infoWindows",d),r.observeAttrSetObj(u,a,d),r.showInfoWindow=r.map.showInfoWindow=r.showInfoWindow||function(t,a,n){var o="string"==typeof t?t:a,s="string"==typeof t?a:n;if("string"==typeof s)if(void 0!==r.map.markers&&void 0!==r.map.markers[s])s=r.map.markers[s];else{if(void 0===r.map.customMarkers||void 0===r.map.customMarkers[s])throw new Error("Cant open info window for id "+s+". Marker or CustomMarker is not defined");s=r.map.customMarkers[s]}var i=r.map.infoWindows[o],l=s||(this.getPosition?this:null);i.__open(r.map,e,l),r.singleInfoWindow&&(r.lastInfoWindow&&e.hideInfoWindow(r.lastInfoWindow),r.lastInfoWindow=o)},r.hideInfoWindow=r.map.hideInfoWindow=r.hideInfoWindow||function(e,t){var a="string"==typeof e?e:t;r.map.infoWindows[a].close()},e.showInfoWindow=r.map.showInfoWindow,e.hideInfoWindow=r.map.hideInfoWindow;var g=d.mapId?{id:d.mapId}:0;s.getMap(g).then(function(t){if(d.visible&&d.__open(t,e),d.visibleOnMarker){var a=d.visibleOnMarker;d.__open(t,e,t.markers[a])}})}}};e.$inject=["Attr2MapOptions","$compile","$q","$templateRequest","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",e)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.KmlLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.orgAttributes(r),i=t.filter(n),l=t.getOptions(i,{scope:e}),u=t.getEvents(e,i),p=a(l,u);o.addObject("kmlLayers",p),o.observeAttrSetObj(s,n,p),r.bind("$destroy",function(){o.deleteObject("kmlLayers",p)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(e,t){var a=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=a.filter(n),i=a.getOptions(s,{scope:e}),l=a.getEvents(e,s,l);t.getMap(o.map.id).then(function(t){for(var a in i){var r=i[a];"function"==typeof e[r]?t.data[a](e[r]):t.data[a](r)}for(var n in l)t.data.addListener(n,l[n])})}}}])}(),function(){"use strict";var e,t,a,r=[],n=[],o=function(a,o,s){var i=s.mapLazyLoadParams||s.mapLazyLoad;if(void 0===window.google||void 0===window.google.maps){n.push({scope:a,element:o,savedHtml:r[n.length]}),window.lazyLoadCallback=function(){e(function(){n.forEach(function(e){e.element.html(e.savedHtml),t(e.element.contents())(e.scope)})},100)};var l=document.createElement("script");l.src=i+(i.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+l.src+'"]')||document.body.appendChild(l)}else o.html(r),t(o.contents())(a)},s=function(e,t){return t.mapLazyLoad,r.push(e.html()),a=t.mapLazyLoad,(void 0===window.google||void 0===window.google.maps)&&(e.html(""),{pre:o})},i=function(a,r){return t=a,e=r,{compile:s}};i.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",i)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(e,t){return{restrict:"E",require:["?^map","?^ngMap"],link:function(a,r,n,o){o=o[0]||o[1];var s,i=n.name;if(!i)throw"invalid map-type name";if(!(s=e(n.object)(a)))throw"invalid map-type object";t.getMap().then(function(e){e.mapTypes.set(i,s)}),o.addObject("mapTypes",s)}}}])}(),function(){"use strict";var e=function(){return{restrict:"AE",
controller:"__MapController",controllerAs:"ngmap"}};angular.module("ngMap").directive("map",[e]),angular.module("ngMap").directive("ngMap",[e])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.visualization.MapsEngineLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.filter(n),i=t.getOptions(s,{scope:e}),l=t.getEvents(e,s,l),u=a(i,l);o.addObject("mapsEngineLayers",u)}}}])}(),function(){"use strict";var e,t,a,r=function(e,t){var r;if(a.defaultOptions.marker)for(var n in a.defaultOptions.marker)void 0===e[n]&&(e[n]=a.defaultOptions.marker[n]);e.position instanceof google.maps.LatLng||(e.position=new google.maps.LatLng(0,0)),r=new google.maps.Marker(e),Object.keys(t).length;for(var o in t)o&&google.maps.event.addListener(r,o,t[o]);return r},n=function(n,o,s,i){i=i[0]||i[1];var l,u=e.orgAttributes(o),p=e.filter(s),m=e.getOptions(p,n,{scope:n}),c=e.getEvents(n,p);m.position instanceof google.maps.LatLng||(l=m.position);var d=r(m,c);i.addObject("markers",d),l&&a.getGeoLocation(l).then(function(e){d.setPosition(e),m.centered&&d.map.setCenter(e);var a=s.geoCallback;a&&t(a)(n)}),i.observeAttrSetObj(u,s,d),o.bind("$destroy",function(){i.deleteObject("markers",d)})},o=function(r,o,s){return e=r,t=o,a=s,{restrict:"E",require:["^?map","?^ngMap"],link:n}};o.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",o)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(e){return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,a,r,n){n=n[0]||n[1];var o=r.initMethod||"insertAt",s=t[r.object];e.getMap().then(function(e){if("insertAt"==o){var t=parseInt(r.index,10);e.overlayMapTypes.insertAt(t,s)}else"push"==o&&e.overlayMapTypes.push(s)}),n.addObject("overlayMapTypes",s)}}}])}(),function(){"use strict";var e=function(e,t){var a=e;return{restrict:"A",require:"?ngModel",link:function(e,r,n,o){if("false"===n.placesAutoComplete)return!1;var s=a.filter(n),i=a.getOptions(s,{scope:e}),l=a.getEvents(e,s),u=new google.maps.places.Autocomplete(r[0],i);u.setOptions({strictBounds:!0===i.strictBounds});for(var p in l)google.maps.event.addListener(u,p,l[p]);var m=function(){t(function(){o&&o.$setViewValue(r.val())},100)};google.maps.event.addListener(u,"place_changed",m),r[0].addEventListener("change",m),n.$observe("rectBounds",function(e){if(e){var t=a.toOptionValue(e,{key:"rectBounds"});u.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(t.south_west.lat,t.south_west.lng),new google.maps.LatLng(t.north_east.lat,t.north_east.lng)))}}),n.$observe("circleBounds",function(e){if(e){var t=a.toOptionValue(e,{key:"circleBounds"}),r=new google.maps.Circle(t);u.setBounds(r.getBounds())}}),n.$observe("types",function(e){if(e){var t=a.toOptionValue(e,{key:"types"});u.setTypes(t)}}),n.$observe("componentRestrictions",function(t){t&&u.setComponentRestrictions(e.$eval(t))})}}};e.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",e)}(),function(){"use strict";var e=function(e,t){var a,r=e.name;switch(delete e.name,r){case"circle":e.center instanceof google.maps.LatLng||(e.center=new google.maps.LatLng(0,0)),a=new google.maps.Circle(e);break;case"polygon":a=new google.maps.Polygon(e);break;case"polyline":a=new google.maps.Polyline(e);break;case"rectangle":a=new google.maps.Rectangle(e);break;case"groundOverlay":case"image":var n=e.url,o={opacity:e.opacity,clickable:e.clickable,id:e.id};a=new google.maps.GroundOverlay(n,e.bounds,o)}for(var s in t)t[s]&&google.maps.event.addListener(a,s,t[s]);return a},t=function(t,a,r){var n=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,o,s,i){i=i[0]||i[1];var l,u,p=n.orgAttributes(o),m=n.filter(s),c=n.getOptions(m,{scope:t}),d=n.getEvents(t,m);u=c.name,c.center instanceof google.maps.LatLng||(l=c.center);var g=e(c,d);i.addObject("shapes",g),l&&"circle"==u&&r.getGeoLocation(l).then(function(e){g.setCenter(e),g.centered&&g.map.setCenter(e);var r=s.geoCallback;r&&a(r)(t)}),i.observeAttrSetObj(p,s,g),o.bind("$destroy",function(){i.deleteObject("shapes",g)})}}};t.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",t)}(),function(){"use strict";var e=function(e,t){var a=e,r=function(e,t,a){var r,n;t.container&&(n=document.getElementById(t.container),n=n||document.querySelector(t.container)),n?r=new google.maps.StreetViewPanorama(n,t):(r=e.getStreetView(),r.setOptions(t));for(var o in a)o&&google.maps.event.addListener(r,o,a[o]);return r};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,n,o){var s=a.filter(o),i=a.getOptions(s,{scope:e}),l=a.getControlOptions(s),u=angular.extend(i,l),p=a.getEvents(e,s);t.getMap().then(function(e){var t=r(e,u,p);e.setStreetView(t),!t.getPosition()&&t.setPosition(e.getCenter()),google.maps.event.addListener(t,"position_changed",function(){t.getPosition()!==e.getCenter()&&e.setCenter(t.getPosition())});var a=google.maps.event.addListener(e,"center_changed",function(){t.setPosition(e.getCenter()),google.maps.event.removeListener(a)})})}}};e.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",e)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.TrafficLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.orgAttributes(r),i=t.filter(n),l=t.getOptions(i,{scope:e}),u=t.getEvents(e,i),p=a(l,u);o.addObject("trafficLayers",p),o.observeAttrSetObj(s,n,p),r.bind("$destroy",function(){o.deleteObject("trafficLayers",p)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(e){var t=e,a=function(e,t){var a=new google.maps.TransitLayer(e);for(var r in t)google.maps.event.addListener(a,r,t[r]);return a};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,r,n,o){o=o[0]||o[1];var s=t.orgAttributes(r),i=t.filter(n),l=t.getOptions(i,{scope:e}),u=t.getEvents(e,i),p=a(l,u);o.addObject("transitLayers",p),o.observeAttrSetObj(s,n,p),r.bind("$destroy",function(){o.deleteObject("transitLayers",p)})}}}])}(),function(){"use strict";var e=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,a=function(){return function(a){return a.replace(e,function(e,t,a,r){return r?a.toUpperCase():a}).replace(t,"Moz$1")}};angular.module("ngMap").filter("camelCase",a)}(),function(){"use strict";var e=function(){return function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};angular.module("ngMap").filter("escapeRegexp",e)}(),function(){"use strict";var e=function(){return function(e){try{return JSON.parse(e),e}catch(t){return e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'}).replace(/''/g,'""')}}};angular.module("ngMap").filter("jsonize",e)}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,$interpolate,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter,escapeRegExp){var exprStartSymbol=$interpolate.startSymbol(),exprEndSymbol=$interpolate.endSymbol(),orgAttributes=function(e){e.length>0&&(e=e[0]);for(var t={},a=0;a<e.attributes.length;a++){var r=e.attributes[a];t[r.name]=r.value}return t},getJSON=function(e){var t=/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/;return e.match(t)&&(e="["+e+"]"),JSON.parse(jsonizeFilter(e))},getLatLng=function(e){var t=e;if(e[0].constructor==Array)if(e[0][0].constructor==Array&&2==e[0][0].length||e[0][0].constructor==Object){for(var a,r=[],n=0;n<e.length;n++)a=e[n].map(function(e){return new google.maps.LatLng(e[0],e[1])}),r.push(a);t=r}else t=e.map(function(e){return new google.maps.LatLng(e[0],e[1])});else!isNaN(parseFloat(e[0]))&&isFinite(e[0])&&(t=new google.maps.LatLng(t[0],t[1]));return t},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input);if(output instanceof Array)output=output[0].constructor==Object?output:output[0]instanceof Array&&output[0][0].constructor==Object?output:getLatLng(output);else if(output===Object(output)){var newOptions=options;newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions)}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(e){output=input}else if(input.match(new RegExp("^"+escapeRegExp(exprStartSymbol)))&&options.scope)try{var expr=input.replace(new RegExp(escapeRegExp(exprStartSymbol)),"").replace(new RegExp(escapeRegExp(exprEndSymbol),"g"),"");output=options.scope.$eval(expr)}catch(e){output=input}else output=input}}if(("center"==options.key||"position"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(var key in output){var arr=output[key];"anchor"==key||"origin"==key||"labelOrigin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):("size"==key||"scaledSize"==key)&&(output[key]=new google.maps.Size(arr[0],arr[1]))}}return output},getAttrsToObserve=function(e){var t=[],a=new RegExp(escapeRegExp(exprStartSymbol)+".*"+escapeRegExp(exprEndSymbol),"g");if(!e.noWatcher)for(var r in e){var n=e[r];n&&n.match(a)&&t.push(camelCaseFilter(r))}return t},filter=function(e){var t={};for(var a in e)a.match(/^\$/)||a.match(/^ng[A-Z]/)||(t[a]=e[a]);return t},getOptions=function(e,t){t=t||{};var a={};for(var r in e)if(e[r]||0===e[r]){if(r.match(/^on[A-Z]/))continue;if(r.match(/ControlOptions$/))continue;a[r]="string"!=typeof e[r]?e[r]:t.doNotConverStringToNumber&&e[r].match(/^[0-9]+$/)?e[r]:toOptionValue(e[r],{key:r,scope:t.scope})}return a},getEvents=function(e,t){var a={},r=function(e){return"_"+e.toLowerCase()},n=function(t){var a=t.match(/([^\(]+)\(([^\)]*)\)/),r=a[1],n=a[2].replace(/event[ ,]*/,""),o=$parse("["+n+"]");return function(t){function a(e,t){return e[t]}var n=o(e),s=r.split(".").reduce(a,e);s&&s.apply(this,[t].concat(n)),$timeout(function(){e.$apply()})}};for(var o in t)if(t[o]){if(!o.match(/^on[A-Z]/))continue;var s=o.replace(/^on/,"");s=s.charAt(0).toLowerCase()+s.slice(1),s=s.replace(/([A-Z])/g,r);var i=t[o];a[s]=new n(i)}return a},getControlOptions=function(e){var t={};if("object"!=typeof e)return!1;for(var a in e)if(e[a]){if(!a.match(/(.*)ControlOptions$/))continue;var r=e[a],n=r.replace(/'/g,'"');n=n.replace(/([^"]+)|("[^"]+")/g,function(e,t,a){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):a});try{var o=JSON.parse(n);for(var s in o)if(o[s]){var i=o[s];if("string"==typeof i?i=i.toUpperCase():"mapTypeIds"===s&&(i=i.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===s){var l=a.charAt(0).toUpperCase()+a.slice(1),u=l.replace(/Options$/,"")+"Style";o[s]=google.maps[u][i]}else o[s]="position"===s?google.maps.ControlPosition[i]:i}t[a]=o}catch(e){}}return t};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","$interpolate","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter","escapeRegexpFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){"use strict";var e,t=function(t){var a=e.defer();return(new google.maps.Geocoder).geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK?a.resolve(e):a.reject(t)}),a.promise},a=function(a){return e=a,{geocode:t}};a.$inject=["$q"],angular.module("ngMap").service("GeoCoder",a)}(),function(){"use strict";var e,t,a=function(a,r){return e=a,t=r,{load:function(a){var r=e.defer();if(void 0===window.google||void 0===window.google.maps){window.lazyLoadCallback=function(){t(function(){r.resolve(window.google)},100)};var n=document.createElement("script");n.src=a+(a.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+n.src+'"]')||document.body.appendChild(n)}else r.resolve(window.google);return r.promise}}};a.$inject=["$q","$timeout"],angular.module("ngMap").service("GoogleMapsApi",a)}(),function(){"use strict";var e,t=function(t){var a=e.defer();return navigator.geolocation?(void 0===t?t={timeout:5e3}:void 0===t.timeout&&(t.timeout=5e3),navigator.geolocation.getCurrentPosition(function(e){a.resolve(e)},function(e){a.reject(e)},t)):a.reject("Browser Geolocation service failed."),a.promise},a=function(a){return e=a,{getCurrentPosition:t}};a.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",a)}(),function(){"use strict";var e,t,a,r=[],n=function(a){var n=t.createElement("div");n.style.width="100%",n.style.height="100%",a.appendChild(n);var o=new e.google.maps.Map(n,{});return r.push(o),o},o=function(e,t){for(var a,n=0;n<r.length;n++){var o=r[n];if(o.id==t&&!o.inUse){var s=o.getDiv();e.appendChild(s),a=o;break}}return a},s=function(e){for(var t,a=0;a<r.length;a++){var n=r[a];if(!n.id&&!n.inUse){var o=n.getDiv();e.appendChild(o),t=n;break}}return t},i=function(e){var t=o(e,e.id)||s(e);return t?a(function(){google.maps.event.trigger(t,"idle")},100):t=n(e),t.inUse=!0,t},l=function(e){e.inUse=!1},u=function(){for(var e=0;e<r.length;e++)r[e]=null;r=[]},p=function(e){for(var t=0;t<r.length;t++)null!==r[t]&&r[t].id==e&&(r[t]=null,r.splice(t,1))},m=function(n,o,s){return t=n[0],e=o,a=s,{mapInstances:r,resetMapInstances:u,getMapInstance:i,returnMapInstance:l,deleteMapInstance:p}};m.$inject=["$document","$window","$timeout"],angular.module("ngMap").factory("NgMapPool",m)}(),function(){"use strict";var e,t,a,r,n,o,s,i,l={},u=function(a,r){var n;return a.currentStyle?n=a.currentStyle[r]:e.getComputedStyle&&(n=t.defaultView.getComputedStyle(a,null).getPropertyValue(r)),n},p=function(e){var t=l[e||0];return t.map instanceof google.maps.Map?void 0:(t.initializeMap(),t.map)},m=function(t,r){function n(a){var r=Object.keys(l),i=l[r[0]];t&&l[t]?o.resolve(l[t].map):!t&&i&&i.map?o.resolve(i.map):a>s?o.reject("could not find map"):e.setTimeout(function(){n(a+100)},100)}r=r||{},t="object"==typeof t?t.id:t;var o=a.defer(),s=r.timeout||1e4;return n(0),o.promise},c=function(e){if(e.map){var t=Object.keys(l).length;l[e.map.id||t]=e}},d=function(e){var t=Object.keys(l).length-1,a=e.map.id||t;if(e.map){for(var r in e.eventListeners){var n=e.eventListeners[r];google.maps.event.removeListener(n)}e.map.controls&&e.map.controls.forEach(function(e){e.clear()})}e.map.heatmapLayers&&Object.keys(e.map.heatmapLayers).forEach(function(t){e.deleteObject("heatmapLayers",e.map.heatmapLayers[t])}),i.deleteMapInstance(a),delete l[a]},g=function(e,t){var n=a.defer();return!e||e.match(/^current/i)?r.getCurrentPosition(t).then(function(e){var t=e.coords.latitude,a=e.coords.longitude,r=new google.maps.LatLng(t,a);n.resolve(r)},function(e){n.reject(e)}):o.geocode({address:e}).then(function(e){n.resolve(e[0].geometry.location)},function(e){n.reject(e)}),n.promise},h=function(e,t){return function(a){if(a){var r=s("set-"+e),o=n.toOptionValue(a,{key:e});t[r]&&(e.match(/center|position/)&&"string"==typeof o?g(o).then(function(e){t[r](e)}):t[r](o))}}},f=function(e){"true"==e.getAttribute("default-style")?(e.style.display="block",e.style.height="300px"):("block"!=u(e,"display")&&(e.style.display="block"),u(e,"height").match(/^(0|auto)/)&&(e.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var l={};this.setDefaultOptions=function(e){l=e};var u=function(u,y,v,k,M,w,b,C){return e=u,t=y[0],a=v,r=k,n=M,o=w,s=b,i=C,{defaultOptions:l,addMap:c,deleteMap:d,getMap:m,initMap:p,setStyle:f,getGeoLocation:g,observeAndSet:h}};u.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter","NgMapPool"],this.$get=u})}(),function(){"use strict";var e,t=function(t,a){a=a||t.getCenter();var r=e.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(a||t.getCenter,100,function(e,t){t===google.maps.StreetViewStatus.OK?r.resolve(e.location.pano):r.resolve(!1)}),r.promise},a=function(e,t){new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0}).setPano(t)},r=function(r){return e=r,{getPanorama:t,setPanorama:a}};r.$inject=["$q"],angular.module("ngMap").service("StreetView",r)}(),"ngMap"}),angular.module("Modules",["ui.router","ngMaterial","ngSanitize","ngMap"]).config(["$stateProvider","$locationProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider","$mdAriaProvider",function(e,t,a,r,n,o){n.theme("default").primaryPalette("blue").accentPalette("red"),o.disableWarnings(),r.interceptors.push(["$injector","$q",function(e,t){return{responseError:function(e){return window.location.reload(),t.reject(e)}}}]),r.defaults.headers.common.Pragma="no-cache",window.history&&window.history.pushState&&t.html5Mode({enabled:!0,requireBase:!1}),e.state("map",{url:"/map",views:{mainView:{templateUrl:"views/maps",controller:"MapController",controllerAs:"mapController"}}}).state("modules_list",{url:"/modules_list",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},mainView:{templateUrl:"views/module/list",controller:"ModulesListController",controllerAs:"listController"}}}).state("module_info",{url:"/module_info",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/info",controller:"ModuleInfoController"}}}).state("module_menu",{url:"/module_menu",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/menu",controller:"ModuleMenuController"}}}).state("module_tiles",{url:"/module_tiles",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/tiles",controller:"ModuleTilesController"}}}).state("module_zones",{url:"/module_zones",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/zones",controller:"ModuleZonesController"}}}).state("module_alarm",{url:"/module_alarm",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/alarm",controller:"ModuleAlarmController"}}}).state("module_alarm_history",{url:"/module_alarm_history",views:{headerView:{templateUrl:"views/menu",controller:"MenuController"},submenuView:{templateUrl:"views/submenu",controller:"MenuController"},mainView:{templateUrl:"views/module/alarm_history",controller:"ModuleAlarmHistoryController"}}}).state("error_404",{url:"/404",views:{errorView:{templateUrl:"views/error_404"}}}),a.otherwise("/404")}]).run(["$rootScope","$state","$http","login",function(e,t,a,r){e.state=t,r.isAuthenticated()}]),angular.module("Modules").controller("DialogController",["$scope","$mdDialog","tools","maps","moduleData","moduleApp",function(e,t,a,r,n,o){e.tools=a,e.maps=r,e.moduleApp=o,e.moduleData=n,e.cancel=function(){t.cancel()}}]),angular.module("Modules").controller("MainController",["$scope",function(e){}]),angular.module("Modules").controller("MapController",["$scope","$state","$mdSidenav","$mdBottomSheet","maps","login","moduleData",function(e,t,a,r,n,o,s){e.maps=n,e.login=o,e.maps.search.text="",e.maps.showMap=!1,s.clearIntervals(),o.resetLoginForm(),n.getModules(),e.toggleRight=function(){a("right").toggle()},e.openBottomSheet=function(){r.show({templateUrl:"views/module_list",controller:"DialogController"})}}]),angular.module("Modules").controller("MenuController",["$scope","$state","maps","login","moduleData",function(e,t,a,r,n){e.maps=a,e.login=r,e.moduleData=n}]),angular.module("Modules").controller("ModulesListController",["$scope","$state","$interval","login","modules","moduleData","moduleApp","tools",function(e,t,a,r,n,o,s,i){e.login=r,e.modules=n,e.moduleApp=s,e.moduleData=o,e.tools=i,s.typeField="id",s.reverse=!0,n.moduleAlert=!1,e.modules.search.text="",o.module={},0===i.subtitles.length&&(i.getSubtitles(),i.getCompanies()),o.clearIntervals(),n.getAccountModules(),o.selectInterval=a(function(){n.getAccountModules()},5e3)}]),angular.module("Modules").controller("ModuleAlarmController",["$scope","$interval","$mdDialog","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o,s){e.tools=r,e.login=n,e.moduleData=o,e.moduleApp=s,s.typeField="lastUpdate",s.reverse=!0,s.search.text="",s.alarmAlert=!1,s.showAlarmInfo=!1,o.clearIntervals(),o.getModuleAlarm(),e.showAlarm=function(e,t){o.selectedAlarm=t,a.show({controller:"DialogController",templateUrl:"views/info/alarm_info",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.alarmInterval=t(function(){o.getModuleAlarm()},5e3)}]),angular.module("Modules").controller("ModuleAlarmHistoryController",["$scope","$interval","$mdDialog","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o,s){e.tools=r,e.login=n,e.moduleData=o,e.moduleApp=s,s.typeField="startAlarm",s.reverse=!0,s.search.text="",s.alarmHistoryAlert=!1,s.showAlarmInfo=!1,o.clearIntervals(),o.getModuleAlarmHistory(),e.showAlarm=function(e,t){o.selectedAlarm=t,a.show({controller:"DialogController",templateUrl:"views/info/alarm_history_info",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.alarmHistoryInterval=t(function(){o.getModuleAlarmHistory()},5e3)}]),angular.module("Modules").controller("ModuleInfoController",["$scope","$interval","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o){e.tools=a,e.login=r,e.moduleData=n,e.moduleApp=o,o.module={},n.clearIntervals(),n.getModuleInfo(n.currentModule),n.infoInterval=t(function(){n.getModuleInfo(n.currentModule)},5e3)}]),angular.module("Modules").controller("ModuleMenuController",["$scope","$mdDialog","$interval","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o,s){e.tools=r,e.login=n,e.moduleData=o,e.moduleApp=s,s.typeField="menuType",s.reverse=!1,s.search.text="",s.menuAlert=!1,o.clearIntervals(),o.getModuleMenu(),e.showControl=function(e,a){o.selectControl=r.convertMenuParameters(a),t.show({controller:"DialogController",templateUrl:"views/info/info_view",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.menuInterval=a(function(){o.getModuleMenu()},5e3)}]),angular.module("Modules").controller("ModuleTilesController",["$scope","$interval","$mdDialog","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o,s){e.tools=r,e.login=n,e.moduleData=o,e.moduleApp=s,s.typeField="orderId",s.reverse=!1,s.search.text="",s.tilesAlert=!1,o.clearIntervals(),o.getModuleTiles(),e.showTile=function(e,t){o.selectControl=r.convertTileParameters(t),a.show({controller:"DialogController",templateUrl:"views/info/info_view",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.tileInterval=t(function(){o.getModuleTiles()},5e3)}]),angular.module("Modules").controller("ModuleZonesController",["$scope","$interval","$mdDialog","tools","login","moduleData","moduleApp",function(e,t,a,r,n,o,s){e.tools=r,e.login=n,e.moduleData=o,e.moduleApp=s,s.zoneAlert=!1,s.reverse=!1,s.typeField="zoneName",o.clearIntervals(),o.getModuleZones(o.currentModule),e.showZone=function(e,t){o.selectedZone=t,a.show({controller:"DialogController",templateUrl:"views/info/zone_info",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},e.showSchedule=function(e,t){o.selectedSchedule=t,a.show({controller:"DialogController",templateUrl:"views/info/schedule_info",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0})},o.zoneInterval=t(function(){o.getModuleZones(o.currentModule)},5e3)}]),angular.module("Modules").controller("SubmenuController",["$scope","$state","maps","login","moduleData",function(e,t,a,r,n){e.maps=a,e.login=r,e.moduleData=n}]),angular.module("Modules").factory("login",["$http","$state","tools",function(e,t,a){var r={};return r.isAuthenticated=function(){e.get("/is_authenticated").then(function(e){r.authenticated=e.data.authenticated,r.authenticated?(r.accountName=e.data.accountName,r.accountType=e.data.accountType,t.go("modules_list")):(r.accountName="",r.accountType="user",t.go("map"))})},r.go=function(e){t.go(e)},r.resetLoginForm=function(){r.account="",r.password="",r.type="user",r.database="official"},r.login=function(n){var o="",s="",i="";if(r.account.length>0&&r.password.length>0){var l=JSON.stringify({account:r.account,password:r.password,database:r.database,type:r.type});e.post("/login",l).then(function(e){r.resetLoginForm(),r.authenticated=e.data.authenticated,r.authenticated?(t.go("modules_list"),r.accountName=e.data.accountName,r.accountType=e.data.accountType):(s="Błąd",o="Podano błędny login lub hasło",i="Spróbuj ponownie",a.showAlert(n,s,o,i))})}else s="Błąd",o="Brak wpisanego loginu lub hasła",i="Spróbuj ponownie",a.showAlert(n,s,o,i)},r.logout=function(){e.post("/logout").then(function(e){t.go("map"),r.authenticated=e.data.authenticated,r.accountName="",r.accountType=""})},r}]),angular.module("Modules").factory("maps",["$http","$window","NgMap",function(e,t,a){var r={};return r.markers=[],r.databasePromise={},r.dynMarkers=[],r.onlyActive=!0,r.search={},r.markerClustererOptions={minimumClusterSize:2e3},r.getModules=function(){r.markers.length>0?(r.getMap(),r.dynMarkers=[],r.markerClusterer.clearMarkers(),r.showMap=!0):e.get("/get_modules").then(function(e){r.markers=e.data,r.getMap(),r.showMap=!0})},r.getMap=function(){a.getMap({id:"map"}).then(function(e){r.map=e,google.maps.event.trigger(e,"resize");var t=new google.maps.LatLng(47.208,18.041);r.map.setCenter(t),r.map.setZoom(5),angular.forEach(r.markers,function(e){"A"===e.params.controllerConnection&&"A"===e.params.moduleConnection&&r.addMarker(e)}),r.tempMarkers=r.dynMarkers,r.markerClusterer=new MarkerClusterer(r.map,r.dynMarkers,r.markerClustererOptions)})},r.centerOnMarker=function(e){e.data.place&&(r.map.setZoom(12),r.map.setCenter(e.position))},r.addMarker=function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);r.dynMarkers.push(new google.maps.Marker({position:t,title:e.params.name+"\n"+e.params.type+" "+e.params.company+(null!==e.params.place?"\n"+e.params.place:""),icon:"img/"+r.getType(e.params.type)+".png",data:{name:e.params.name,type:e.params.type,company:e.params.company,place:e.params.place,controllerConnection:e.params.controllerConnection,moduleConnection:e.params.moduleConnection}}))},r.getType=function(e){return"Kocioł węglowy"===e?"Wegiel":"Pompa ciepła"===e?"Pompa":e},r.refreshMap=function(){r.markerClusterer.clearMarkers(),r.markerClusterer=new MarkerClusterer(r.map,r.dynMarkers,r.markerClustererOptions)},r.searchText=function(e){var t="";e.length?(e=e.toLowerCase(),r.dynMarkers=[],angular.forEach(r.tempMarkers,function(a){t=a.title.toLowerCase(),t.indexOf(e)>=0&&(r.onlyActive&&"A"===a.data.controllerConnection&&"A"===a.data.moduleConnection||!1===r.onlyActive)&&r.dynMarkers.push(a)}),r.refreshMap()):(r.dynMarkers=r.tempMarkers,r.refreshMap())},r.changeOnlyActive=function(){r.dynMarkers=[],r.search.text="",angular.forEach(r.markers,function(e){r.onlyActive?"A"===e.params.controllerConnection&&"A"===e.params.moduleConnection&&r.addMarker(e):r.addMarker(e)}),r.tempMarkers=r.dynMarkers,r.refreshMap()},r}]),angular.module("Modules").factory("modules",["$http","$state","$filter","login",function(e,t,a,r){var n={};return n.search={},n.getAccountModules=function(){e.get("/get_account_modules").then(function(e){e.data.authenticated?(n.accountModules=e.data.modules,n.tempAccountModules=e.data.modules,0===n.accountModules.length&&(n.moduleAlert=!0),n.search.text.length>0&&n.searchText(n.search.text)):r.logout()})},n.searchText=function(e){var t="";e.length?(e=e.toLowerCase(),n.accountModules=[],angular.forEach(n.tempAccountModules,function(r){t=r.id+" "+r.nazwa_modulu+" "+r.konto+" "+r.email_powiadomien+" "+a("infoController")(r.info_sterownika),t.toLowerCase().indexOf(e)>=0&&n.accountModules.push(r)})):n.accountModules=n.tempAccountModules},n}]),angular.module("Modules").factory("moduleApp",["tools",function(e){var t={};return t.search={},t.makeMenuTree=function(){t.menuTree=[];var e=0;angular.forEach(t.tempModuleMenu,function(a){0===a.id&&(e=30,a.margin=30,t.menuTree.push(a),t.searchNode(a,e+100))})},t.searchNode=function(e,a){angular.forEach(t.tempModuleMenu,function(r){r.parentId===e.id&&0!==r.id&&r.menuType===e.menuType&&(r.margin=a,t.menuTree.push(r),0!==r.type&&35!==r.type||t.searchNode(r,a+100))})},t.searchText=function(a,r){var n="",o={};"menu"===r?(o.modules="moduleMenu",o.tempModules="tempModuleMenu"):"tile"===r?(o.modules="moduleTiles",o.tempModules="tempModuleTiles"):"alarm"===r?(o.modules="moduleAlarm",o.tempModules="tempModuleAlarm"):"alarm_history"===r&&(o.modules="moduleAlarmHistory",o.tempModules="tempModuleAlarmHistory"),a.length?(a=a.toLowerCase(),t[o.modules]=[],angular.forEach(t[o.tempModules],function(s){"menu"===r?n=e.subtitle(s.txtId)+" "+e.getDay(s)+" "+s.id:"tile"===r?n=(s.params.txtId?e.subtitle(s.params.txtId):s.params.description)+" "+s.id:"alarm"!==r&&"alarm_history"!==r||(n=e.subtitle(s.txtId)+" "+s.id),n.toLowerCase().indexOf(a)>=0&&t[o.modules].push(s)})):t[o.modules]=t[o.tempModules]},t.showAlarm=function(e,a){"show"===e?(t.alarm=a,t.showAlarmInfo=!0):t.showAlarmInfo=!1},t.getControllerModeName=function(){var a=[3109,811,809,1401];return e.subtitle(a[t.moduleZones.controllerParameters.controllerMode.value])},t.setOrder=function(e){e===t.typeField?t.reverse=!t.reverse:(t.typeField=e,t.reverse=!1)},t}]),angular.module("Modules").factory("moduleData",["$http","$state","$interval","moduleApp","modules",function(e,t,a,r,n){var o={};return o.module={},o.getSelectModule=function(e){0===window.getSelection().toString().length&&(o.currentModule=e,t.go("module_info"))},o.clearIntervals=function(){a.cancel(o.infoInterval),a.cancel(o.menuInterval),a.cancel(o.zoneInterval),a.cancel(o.tileInterval),a.cancel(o.selectInterval),a.cancel(o.alarmHistoryInterval),a.cancel(o.alarmInterval),r.moduleZones=[],r.moduleTiles=[],r.moduleAlarm=[],r.moduleAlarmHistory=[],r.moduleMenu=[],n.accountModules=[]},o.getModuleInfo=function(t){o.selectedModule=!0,e.get("/get_module_info",{params:{moduleId:t.id}}).then(function(e){if(r.module=e.data,r.module.maxDates={maxMenu:null!==r.module.maxDates.max_menu?r.module.maxDates.max_menu:null,maxTile:null!==r.module.maxDates.max_tile?r.module.maxDates.max_tile:null,maxZone:null!==r.module.maxDates.max_zone?r.module.maxDates.max_zone:null},
null!==r.module.info_sterownika){var t=r.module.info_sterownika.split(",");r.module.info_sterownika=t[8]+" "+t[4]}var a=new Date(r.module.kiedy);r.module.kiedy=("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)})},o.getModuleMenu=function(){e.get("/get_module_menu",{params:{moduleId:r.module.id}}).then(function(e){r.moduleMenu=e.data,r.tempModuleMenu=e.data,0===r.moduleMenu.length&&(r.menuAlert=!0),r.search.text.length>0&&r.searchText(r.search.text,"menu"),r.makeMenuTree()})},o.getModuleTiles=function(){e.get("/get_module_tiles",{params:{moduleId:r.module.id}}).then(function(e){r.moduleTiles=e.data,r.tempModuleTiles=e.data,0===r.moduleTiles.length&&(r.tilesAlert=!0),r.search.text.length>0&&r.searchText(r.search.text,"tile")})},o.getModuleZones=function(){e.get("/get_module_zones",{params:{moduleId:r.module.id}}).then(function(e){r.moduleZones=e.data,r.tempModuleZones=e.data,0!==r.moduleZones.length&&0!==r.moduleZones.elements.length||(r.zoneAlert=!0)})},o.getModuleAlarm=function(){e.get("/get_module_alarm",{params:{moduleId:r.module.id}}).then(function(e){r.moduleAlarm=e.data,r.tempModuleAlarm=e.data,0===r.moduleAlarm.length&&(r.alarmAlert=!0),r.search.text.length>0&&r.searchText(r.search.text,"alarm")})},o.getModuleAlarmHistory=function(){e.get("/get_module_alarm_history",{params:{moduleId:r.module.id}}).then(function(e){r.moduleAlarmHistory=e.data,r.tempModuleAlarmHistory=e.data,0===r.moduleAlarmHistory.length&&(r.alarmHistoryAlert=!0),r.search.text.length>0&&r.searchText(r.search.text,"alarm_history")})},o}]),angular.module("Modules").factory("tools",["$http","$filter","$mdDialog",function(e,t,a){var r={};r.subtitles=[];var n=[];return r.getSubtitles=function(){e.get("/get_subtitles").then(function(e){r.subtitles=e.data})},r.subtitle=function(e){return e>0?r.subtitles[e]:""},r.showAlert=function(e,t,r,n){a.show(a.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title(t).textContent(r).ok(n).targetEvent(e))},r.getDay=function(e){var a="";return 12!==e.type&&13!==e.type&&100!==e.type||(a=t("dayName")(e.params.dayId)),a},r.getCompanies=function(){e.get("/get_companies").then(function(e){r.companies=e.data})},r.company=function(e){return null===e?"--":r.companies[e]},r.getType=function(e){return e=null===e?0:e,["Pellet","Listwa","Kocioł węglowy","Solar","Pompa ciepła","Rekuperator","Kominek","Sterownik instalacji"][e]},r.convertMenuParameters=function(e){return n=[{name:"Nazwa",param:r.subtitle(e.txtId)},{name:"Id",param:e.id},{name:"Id rodzica",param:e.parentId},{name:"Indeks",param:e.orderId},{name:"Rodzaj menu",param:e.menuType},{name:"Id  napisu",param:e.txtId},{name:"Id wiki",param:e.wikiTxtId},{name:"Id ikony",param:e.iconId},{name:"Widoczność",param:e.access?"Tak":"Nie"},{name:"W trakcie zmiany",param:e.duringChange?"Tak":"Nie"},{name:"Ostatnia aktualizacja",param:e.lastUpdate},{name:"Dane z bazy",param:e.rawData}],n=r.getSpecialParameters(e,n)},r.getSpecialParameters=function(e,a){var n="";switch(e.type){case 0:case 35:a.push({name:"Typ",param:e.type+" - Element grupujący"}),e.params.password&&a.push({name:"Hasło",param:e.params.password[0]});break;case 1:case 2:case 106:a.push({name:"Typ",param:e.type+" - Kontrolka numeryczna (1 suwak)"}),a.push({name:"Aktualna",param:e.params.value}),a.push({name:"Minimalna",param:e.params.min}),a.push({name:"Maksymalna",param:e.params.max}),a.push({name:"Domyślna",param:e.params.default}),e.params.txtId&&a.push({name:"Jednostka",param:r.subtitle(e.params.txtId)}),106===e.type&&(a.push({name:"Format",param:e.params.format}),a.push({name:"Skok",param:e.params.jump}));break;case 3:case 4:case 5:a.push({name:"Typ",param:e.type+" - Kontrolka numeryczna (2 suwaki)"}),a.push({name:"Aktualna",param:t("minHour")(e.params.value,!0)}),a.push({name:"Minimalna",param:t("minHour")(e.params.min,!0)}),a.push({name:"Maksymalna",param:t("minHour")(e.params.max,!0)}),a.push({name:"Domyślna",param:t("minHour")(e.params.default,!0)}),e.params.txtId&&a.push({name:"Jednostka",param:r.subtitle(e.params.txtId)});break;case 107:a.push({name:"Typ",param:e.type+" - Edycja daty"}),a.push({name:"Dzień",param:e.params.day}),a.push({name:"Miesiąc",param:e.params.month}),a.push({name:"Rok",param:e.params.year});break;case 10:a.push({name:"Typ",param:e.type+" - Załącz/Wyłącz"}),a.push({name:"Aktualna",param:e.params.value}),a.push({name:"Domyślna",param:e.params.default});break;case 11:a.push({name:"Typ",param:e.type+" - Jeden z wielu"}),a.push({name:"Aktualna",param:e.params.value}),a.push({name:"Domyślna",param:e.params.default}),angular.forEach(e.params.options,function(e){a.push({name:"Opcja : "+e.value,param:e.txtId+" - "+r.subtitle(e.txtId)})});break;case 15:a.push({name:"Typ",param:e.type+" - Wiele z wielu"}),a.push({name:"Aktualna",param:e.params.value}),a.push({name:"Domyślna",param:e.params.default}),angular.forEach(e.params.options,function(e,t){a.push({name:"Opcja : "+t,param:e+" - "+r.subtitle(e)})});break;case 12:a.push({name:"Typ",param:e.type+" - Tygodniówka plus/minus"}),a.push({name:"Dzień tygodnia",param:r.getDay(e)+" "+e.params.dayId}),a.push({name:"Id kontrolki dnia poprzedniego",param:e.params.prevObjId}),a.push({name:"Id kontrolki dnia następnego",param:e.params.nextObjId}),a.push({name:"Id kontrolki zmiennej korygowanej",param:e.params.valueObjId}),a.push({name:"Wartość minimalna",param:e.params.min}),a.push({name:"Wartość maksymalna",param:e.params.max}),e.params.values.length?angular.forEach(e.params.values,function(e,t){a.push({name:"Godzina : "+t,param:+e<0?"-"+e:"+"+e})}):a.push({name:"Opcja",param:"Wartości domyślne / pusta tablica"});break;case 13:a.push({name:"Typ",param:e.type+" - Tygodniówka włącz/wyłącz"}),a.push({name:"Dzień tygodnia",param:r.getDay(e)+" "+e.params.dayId}),a.push({name:"Id kontrolki dnia poprzedniego",param:e.params.prevObjId}),a.push({name:"Id kontrolki dnia następnego",param:e.params.nextObjId});var o=parseInt(e.params.value,10).toString(2);o=o.split("").reverse().join("")+"000000000000000000000000000000000000000000000000",a.push({name:"Wartość aktualna",param:o.slice(0,e.params.noZones)+" "+e.params.value});var s=parseInt(e.params.default,10).toString(2);s=s.split("").reverse().join("")+"000000000000000000000000000000000000000000000000",a.push({name:"Wartość domlyślna",param:s.slice(0,e.params.noZones)+" "+e.params.default}),a.push({name:"Liczba stref",param:e.params.noZones}),a.push({name:"Opis własny",param:e.params.daySubtitles});break;case 100:a.push({name:"Typ",param:e.type+" - Tygodniówka uniwersalna"}),a.push({name:"Dzień tygodnia",param:r.getDay(e)+" "+e.params.dayId}),a.push({name:"Id kontrolki dnia poprzedniego",param:e.params.prevObjId}),a.push({name:"Id kontrolki dnia następnego",param:e.params.nextObjId}),a.push({name:"Typ harmonogramu",param:e.params.type}),a.push({name:"Krok harmonogramu",param:e.params.step}),a.push({name:"Liczba wierszy",param:e.params.numRows}),a.push({name:"Liczba kolumn",param:e.params.numCols}),a.push({name:"Kolumny (właściwości)",param:""}),angular.forEach(e.params.cols,function(e){a.push({name:r.subtitle(e.txtId),param:"Typ: "+e.type+" | min: "+e.min+" | max: "+e.max+" | interval: "+e.interval})}),a.push({name:"Wiersze",param:""}),angular.forEach(e.params.rows,function(e,t){a.push({name:"Wiersz: "+parseInt(t+1)+" (czas)",param:"Start:"+e.startTime+" | Start - domyślny: "+e.defaultStartTime+" | Koniec: "+e.endTime+" | Koniec - domyślny: "+e.defaultEndTime}),a.push({name:"Wiersz: "+parseInt(t+1)+" (kolumny)",param:"Poziom: "+e.valueFirstColumn+" | Poziom - domyślny: "+e.defaultFirstColumn+" | Temperatura: "+e.valueSecondColumn+" | Temperatura - domyślna: "+e.defaultSecondColumn})});break;case 20:a.push({name:"Typ",param:e.type+" - Dialog"}),a.push({name:"Napis powiadomienia",param:r.subtitle(e.params.txtId)}),a.push({name:"Typ dialogu",param:e.params.type}),a.push({name:"Wartość wybrana",param:e.params.value}),a.push({name:"Blokowanie ukrywania kontrolki włączone",param:1===e.params.blockHide?"Tak":"Nie"});break;case 30:a.push({name:"Typ",param:e.type+" - Krzywa grzewcza"}),a.push({name:"Wartość minimalna ",param:e.params.min}),a.push({name:"Wartość maksymalna",param:e.params.max}),a.push({name:"Punkty",param:""}),angular.forEach(e.params.points,function(e,t){a.push({name:"Parametry punktu: "+parseInt(t+1),param:"Wartość aktualna: "+e.value+" | wartość domyślna: "+e.default+" | położenie: "+e.position})});break;case 31:a.push({name:"Typ",param:e.type+" - Krzywa grzewcza przesunięcie/nachylenie"}),a.push({name:"Nachylenie",param:e.params.slope}),a.push({name:"Minimalne nachylenie",param:e.params.minSlope}),a.push({name:"Maksymalne nachylenie",param:e.params.maxSlope}),a.push({name:"Domyślne nachylenie",param:e.params.defaultSlope}),a.push({name:"Przesunięcie",param:e.params.shift}),a.push({name:"Minimalne przesunięcie",param:e.params.minShift}),a.push({name:"Maksymalne przesunięcie",param:e.params.maxShift}),a.push({name:"Domyślne przesunięcie",param:e.params.defaultShift}),a.push({name:"Maksymalna zadana",param:e.params.maxValue});break;case 36:a.push({name:"Typ",param:e.type+" - Podgląd parametrów serwisowych"}),angular.forEach(e.params,function(e,t){a.push({name:"Paramentr: "+t,param:"Id napisu: "+e.txtId+" | wartość: "+e.value+" | typ: "+e.type+" : | id jednostki: "+e.unit+" | aktywność: "+e.activity})});break;case 45:a.push({name:"Typ",param:e.type+" - Tabela danych"}),a.push({name:"Liczba kolumn",param:e.params.noCols}),a.push({name:"Liczba wierszy",param:e.params.noRows}),a.push({name:"Nazwy kolumn",param:""}),angular.forEach(e.params.colsDef,function(e,t){a.push({name:"Kolumna "+parseInt(t+1),param:"Napis: "+r.subtitle(e.idSubtitle)+" | typ: "+e.type})}),e.params.rowsData.length>0?a.push({name:"Wiersze",param:""}):a.push({name:"Brak danych dla wierszy",param:""}),angular.forEach(e.params.rowsData,function(e,t){n="";for(var r=0;r<e.length;r++)n+=" Kolumna "+parseInt(r+1)+" : "+e[r];a.push({name:"Wiersz "+parseInt(t+1)+" dane: ",param:n})});break;case 46:a.push({name:"Typ",param:e.type+" - Tabela danych - niejednolite wiersze"}),a.push({name:"Liczba kolumn",param:e.params.noCols}),a.push({name:"Liczba wierszy",param:e.params.noRows}),a.push({name:"Kolumny",param:""}),angular.forEach(e.params.colsDef,function(e,t){a.push({name:"Kolumna "+parseInt(t+1),param:"Napis: "+r.subtitle(e)})}),a.push({name:"Wiersze",param:""}),angular.forEach(e.params.rowsData,function(e,t){n="",angular.forEach(e,function(e,t){n+=" | Kolumna: "+parseInt(t+1)+" wartość: "+e.value+" typ: "+e.type}),a.push({name:"Wiersz "+parseInt(t+1),param:n})})}return a},r.convertTileParameters=function(e){return n=[{name:"Nazwa",param:e.params.txtId>0?r.subtitle(e.params.txtId):e.params.description},{name:"Id",param:e.id},{name:"Id rodzica",param:e.parentId},{name:"Typ",param:t("tileType")(e.type)},{name:"Widoczność",param:e.visibility?"Widoczny":"Ukryty"},{name:"Kolejność",param:null===e.orderId?"Nieustalono":e.orderId},{name:"Id elementu menu",param:e.menuId},{name:"Ostatnia aktualizacja",param:e.lastUpdate},{name:"Dane z bazy",param:e.rawData}],n=r.getTileSpecialParameters(e,n)},r.getTileSpecialParameters=function(e,a){switch(e.type){case 1:a.push({name:"Czujnik sprawny",param:e.params.workingStatus?"Tak":"Nie"}),a.push({name:"Wartość",param:e.params.value>-200?Math.round(10*e.params.value)/100:"--"}),a.push({name:"Poziom bateria",param:e.params.batteryLevel>0?e.params.batteryLevel:"--"}),a.push({name:"Poziom sygnału",param:e.params.signalStrength>0?e.params.signalStrength:"--"});break;case 2:a.push({name:"Czujnik sprawny",param:e.params.workingStatus?"Tak":"Nie"}),a.push({name:"Wartość",param:e.params.value>-200?Math.round(10*e.params.value)/100:"--"});break;case 3:a.push({name:"Stan",param:1===e.params.firingUp?"Rozpalanie":"Wygaszanie"});break;case 6:a.push({name:"Stan (pasek po lewej)",param:1===e.params.statusId?"Wł":"Wył"}),a.push({name:"Id ikony",param:e.params.iconId}),a.push({name:"Wartość 1: napis",param:e.params.widget1.txtId+" - "+r.subtitle(e.params.widget1.txtId)}),a.push({name:"Wartość 1: wartość",param:e.params.widget1.value}),a.push({name:"Wartość 1: jednostka",param:e.params.widget1.unit}),a.push({name:"Wartość 1: typ",param:e.params.widget1.type}),a.push({name:"Wartość 1: parametry",param:e.params.widget1.params}),a.push({name:"Wartość 2: napis",param:e.params.widget2.txtId+" - "+r.subtitle(e.params.widget2.txtId)}),a.push({name:"Wartość 2: wartość",param:e.params.widget2.value}),a.push({name:"Wartość 2: jednostka",param:e.params.widget2.unit}),a.push({name:"Wartość 2: typ",param:e.params.widget2.type}),a.push({name:"Wartość 2: parametry",param:e.params.widget2.params});break;case 11:a.push({name:"Stan",param:e.params.workingStatus?"Włączony":"Wyłączony"}),a.push({name:"Id ikony",param:e.params.iconId});break;case 21:a.push({name:"Stan",param:e.params.workingStatus?"Włączona":"Wyłączona"}),a.push({name:"Numer pompy",param:e.params.pumpNumber});break;case 22:a.push({name:"Stan",param:e.params.workingStatus?"Włączony":"Wyłączony"}),a.push({name:"Numer wentylatora",param:e.params.fanNumber}),a.push({name:"Bieg",param:e.params.gear});break;case 23:case 24:a.push({name:"Stan",param:e.params.workingStatus?"Włączony":"Wyłączony"}),a.push({name:"Numer zaworu",param:e.params.valveNumber}),a.push({name:"Temperatura bieżąca",param:Math.round(10*e.params.currentTemp)/100}),a.push({name:"Temperatura powrotu",param:Math.round(10*e.params.returnTemp)/100}),a.push({name:"Korekta temperatury zadanej",param:e.params.setTempCorrection}),a.push({name:"Procent otwarcia",param:e.params.openingPercentage}),a.push({name:"Numer pompy zaworu",param:e.params.valvePump}),a.push({name:"Ochrona kotła",param:1===e.params.boilerProtection?"Włączona":"Wyłączona"}),a.push({name:"Ochrona powrotu",param:1===e.params.returnProtection?"Włączona":"Wyłączona"}),a.push({name:"Temperatura zadana",param:e.params.setTemp}),a.push({name:"Dodatkowy napis",param:null!==e.params.txtId?e.params.txtId:"--"});break;case 31:a.push({name:"Procent",param:e.params.percentage}),a.push({name:"Godziny",param:e.params.hours});break;case 40:a.push({name:"Napis nagłówka",param:e.params.headerId+" - "+r.subtitle(e.params.headerId)}),a.push({name:"Napis statusu",param:e.params.statusId+" - "+r.subtitle(e.params.statusId)}),a.push({name:"Id ikony",param:e.params.iconId});break;case 41:a.push({name:"Rok",param:e.params.year}),a.push({name:"Miesiąc",param:e.params.month}),a.push({name:"Dzień",param:e.params.day}),a.push({name:"Dzień tygodnia",param:e.params.dayId+" - "+t("dayName")(e.params.dayId)}),a.push({name:"Godzin",param:e.params.hours}),a.push({name:"Minut",param:e.params.minutes});break;case 50:a.push({name:"Nazwa sterownika",param:e.params.controllerName}),a.push({name:"Numer wersji",param:e.params.version}),a.push({name:"Id firmy",param:e.params.companyId+" - "+r.company(e.params.companyId)}),a.push({name:"Napis",param:e.params.txtId+" - "+r.subtitle(e.params.txtId)}),a.push({name:"Id ikony",param:e.params.iconId}),a.push({name:"Id sterownika głównego",param:e.params.mainControllerId});break;case 51:a.push({name:"Napis",param:e.params.txtId+" - "+r.subtitle(e.params.txtId)}),a.push({name:"Numer wersji",param:e.params.version}),a.push({name:"Id ikony",param:e.params.iconId});break;case 60:a.push({name:"Napis",param:e.params.txtId+" - "+r.subtitle(e.params.txtId)}),a.push({name:"Id ikony",param:e.params.iconId});break;case 100:a.push({name:"Aktywność",param:e.params.isActive?"Aktywny":"Nieaktywny"}),a.push({name:"Numer strefy zastąpionej",param:e.params.zoneNumber}),a.push({name:"Tryb",param:1===e.params.mode?"Równolegle":"Wyłączony"}),a.push({name:"Temperatura aktualna CWU",param:Math.round(10*e.params.currentTempDHW)/100}),a.push({name:"Temperatura aktualna C",param:Math.round(10*e.params.currentTempCH)/100}),a.push({name:"Temperatura zadana CWU",param:Math.round(10*e.params.setTempDHW)/100})}return a},r}]),angular.module("Modules").directive("resize",["$window",function(e){return function(t,a,r){var n=angular.element(e);t.$watch(function(){return{h:window.innerHeight,w:window.innerWidth}},function(e){t.windowHeight=e.h,t.windowWidth=e.w},!0),n.bind("resize",function(){t.$apply()})}}]),angular.module("Modules").filter("customOrderBy",["$filter","tools",function(e,t){return function(a,r,n){var o=[],s=n?-1:1;return angular.forEach(a,function(e){o.push(e)}),o.sort(function(a,n){switch(r){case"txtId":return t.subtitle(a.txtId).toLowerCase()>t.subtitle(n.txtId).toLowerCase?s:-s;case"menuType":return a[r]===n[r]?a.orderId>n.orderId?s:-s:a[r]>n[r]?s:-s;case"zoneName":return("default"!==a.description.name?a.description.name.toLowerCase:"Strefa "+(a.zone.id+1))>("default"!==n.description.name?n.description.name.toLowerCase:"Strefa "+(n.zone.id+1))?s:-s;case"zoneId":return a.zone.id>n.zone.id?s:-s;case"zoneMode":return e("zoneMode")(a.mode.mode)>e("zoneMode")(n.mode.mode)?s:-s;case"zoneRelayState":return a.zone.flags.relayState>n.zone.flags.relayState?s:-s;case"zoneState":return a.zone.zoneState>n.zone.zoneState?s:-s;case"actuators":return a.actuators.length>n.actuators.length?s:-s;case"windowsSensor":return a.windowsSensors.length>n.windowsSensors.length?s:-s;case"zoneLastUpdate":return a.zone.time>n.zone.time?s:-s;case"nazwa_modulu":case"konto":return(a[r]?a[r].toLowerCase():"")>(n[r]?n[r].toLowerCase():"")?s:-s;default:return"tileName"===r&&(a[r]=a.params.txtId>0?t.subtitle(a.params.txtId):a.params.description,n[r]=n.params.txtId>0?t.subtitle(n.params.txtId):n.params.description),"orderId"===r&&(a[r]=null===a[r]?999:a[r],n[r]=null===n[r]?999:n[r]),a[r]>n[r]?s:-s}}),o}}]).filter("menuType",function(){return function(e){switch(e){case"MI":e="Menu instalatora";break;case"MU":e="Menu użytkownika";break;case"MS":e="Menu serwisowe";break;case"MP":e="Menu producenta"}return e}}).filter("dayName",["tools",function(e){return function(t){switch(t){case 0:t=e.subtitle(445);break;case 1:t=e.subtitle(590);break;case 2:t=e.subtitle(894);break;case 3:t=e.subtitle(708);break;case 4:t=e.subtitle(235);break;case 5:t=e.subtitle(516);break;case 6:t=e.subtitle(703);break;case 7:t=e.subtitle(588);break;case 8:t=e.subtitle(701);break;case 9:t=e.subtitle(818)}return t}}]).filter("minHour",function(){var e,t;return function(a,r){return a>1440&&!r?"--:--":(e=a%60,t=(a-e)/60,a=("0"+Math.round(t)).slice(-2)+":"+("0"+e).slice(-2))}}).filter("infoController",function(){return function(e){if(null!==e){var t=e.split(",");e=t[8]+" "+t[4]}return e}}).filter("underfloorMode",function(){return function(e){switch(e){case"off":e="Wyłączony";break;case"floorProtection":e="Ochrona podłogi";break;case"sustain":e="Podtrzymanie"}return e}}).filter("underfloorCurrentMode",function(){return function(e){switch(e){case"alarm":e="Błąd pracy";break;case"off":e="Wyłączone";break;case"floorTooCold":e="Podłoga za zimna";break;case"floorTooHot":e="Podłoga za ciepła";break;case"parametersReached":e="Parametry osiągnięte";break;case"antifreezeProtection":e="Ochrona przeciwzamrożeniowa"}return e}}).filter("sensorType",function(){return function(e){switch(e){case"noSensor":e="Brak czujnika";break;case"wireless":e="Bezprzewodowy czujnik podłogowy"}return e}}).filter("actuatorState",function(){return function(e){switch(e){case"lowBattery":e="Niski poziom baterii";break;case"damaged":e="Uszkodzony";break;case"noCommunication":e="Brak komunikacji";break;case"unregistered":e="Niezarejestrowany";break;case"noAlarm":e="Brak alarmów"}return e}}).filter("zoneMode",function(){return function(e){switch(e){case"constantTemp":e="Stała temperatura";break;case"timeLimit":e="Stała z ograniczeniem czasu";break;case"localSchedule":e="Harmonogram lokalny";break;case"globalSchedule":e="Harmonogram globalny"}return e}}).filter("zoneState",function(){return function(e){switch(e){case"sensorDamaged":e="Czujnik uszkodzony";break;case"noCommunication":e="Brak komunikacji";break;case"zoneUnregistered":e="Niezarejestrowana";break;case"zoneOff":e="Wyłączona";break;case"noAlarm":e="Brak alarmów"}return e}}).filter("iconZoneType",function(){return function(e){switch(e){case"living_room":e="Salon";break;case"bathroom":e="Łazienka";break;case"kitchen":e="Kuchnia";break;case"bedroom":e="Sypialnia";break;case"children":e="Pokój dzieci";break;case"wardrobe":e="Garderoba";break;case"corridor":e="Korytarz";break;case"garage":e="Garaż"}return e}}).filter("controlType",function(){return function(e){switch(e){case 0:case 35:e+=" -  Element zbiorczy menu";break;case 1:case 2:e+=" - Numeryczna (1 suwak)";break;case 3:case 4:case 5:e+=" - Numeryczna (2 suwaki)";break;case 106:e+=" - Uniwersalna";break;case 107:e+=" Ustawienie daty";break;case 10:e+=" - Załącz/Wyłącz";break;case 11:e+=" - Wybór jeden z wielu";break;case 12:e+=" - Tygodniówka plus/minus";break;case 13:e+=" - Tygodniówka on/off";break;case 100:e+=" - Tygodniówka uniwersalna";break;case 15:e+=" - Wybór wielu z wielu";break;case 20:e+=" - Dialog";break;case 30:e+=" - Krzywa grzewcza";break;case 32:e+=" - Grupa admin. statystyk";break;case 45:e+=" - Tabela danych";break;case 46:e+=" - Tabela danych niejednolitych"}return e}}).filter("tileType",function(){return function(e){switch(e){case 1:e+=" -  Czujnik temperatury";break;case 2:e+=" - Czujnik ognia";break;case 3:e+=" - Rozpalanie/Wygaszanie";break;case 6:e+=" - Kontrolka uniwersalna";break;case 11:e+=" - Przekaźnik";break;case 21:e+=" - Pompa dodatkowa";break;case 22:e+=" - Wentylator";break;case 23:e+=" - Zawór wbudowany";break;case 24:e+=" - Zawór dodatkowy";break;case 31:e+=" - Zapas paliwa";break;case 32:e+=" - Dezynfekcja";break;case 40:e+=" - Informacja tekstowa";break;case 41:e+=" - Data godzina";break;case 50:e+=" - Wersja oprogramowania sterownika";break;case 51:e+=" - Wersja oprogramowania układu peryferyjnego ";break;case 60:e+=" - Kontener";break;case 70:e+=" - Statystyka";break;case 100:e+=" - CWU listwy"}return e}});